pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
function _init()
	pal( 4, 132, 1 )
	pal( 5, 133, 1 )
	pal( 1, 129, 1 )
	player = {
		x = 60,
		y = 60,
		dx = 0,
		dy = 0,
		sprite = 0,
		base_sprite = 1,
		sprite_flip = false
		}
		
	input = {
			l = 0,
			r = 0,
			u = 0,
			d = 0
		}
	timer = {
		p_an = 0
	}
		
end

function _update()
	
	player.dx = 0
	player.dy = 0
	update_input()
	
	player_anim()
	check_collisions()
	player.dx += input.r + input.l
	player.dy += input.u + input.d
	
	player.x += player.dx
	player.y += player.dy
end

function _draw()
	cls()
	map(0,0)
	spr(player.base_sprite+player.sprite,player.x,player.y,2,2,player.sprite_flip)
	print(fget(mget((player.x + input.r)/8,player.y/8),0))
	pset(player.x+12+ input.r,player.y+12,6)
	spr(10,40,60,1,2)
	spr(10,48,60,1,2,true)
end
-->8
function update_input()
	input.r = 0
	input.l = 0
	input.u = 0
	input.d = 0
	if(btn(➡️)) then
		input.r = 1.4
		player.base_sprite = 33
		player.sprite_flip = false
	end
	if(btn(⬅️)) then
		input.l = -1.4
		player.base_sprite = 33
		player.sprite_flip = true
	end
	if(btn(⬇️)) then
		input.d = 1.4
		player.base_sprite = 65
	end
	if(btn(⬆️)) then
		input.u = -1.4
		player.base_sprite = 97
	end
	if(input.u == 0 and input.d == 0 and input.l == 0 and input.r == 0) then
		player.base_sprite = 1
	end
end

function check_collisions()
	if(fget(mget((player.x+12 + input.r)/8,(player.y+12)/8),0)) then
		input.r = 0
	end
	if(fget(mget((player.x+3 + input.l)/8,(player.y+12)/8),0)) then
		input.l = 0
	end
	if(fget(mget((player.x+8)/8,(player.y+8 + input.u)/8),0)) then
		input.u = 0
	end
	if(fget(mget((player.x+8)/8,(player.y+14 + input.d)/8),0)) then
		input.d = 0
	end
end

-->8
function player_anim()
	if(time() - timer.p_an > 0.3) then
		player.sprite += 2
		timer.p_an = time()
		if(player.sprite > 7) then
			player.sprite = 0
		end
	end 
end
__gfx__
00000000000002222220000000000222222000000000000000000000000000000000000011111111000330330000000000000000000000000000000000000000
00000000000022222222000000002222222200000000022222200000000002222220000022222211033333330000000000000000000000000000000000000000
007007000002222f222220000000222f222200000000222222220000000022222222000022222221033333330000000000000000000000000000000000000000
00077000000222fff2222000000222fff22220000002222f222220000002222f2222200022222221030083330000000000000000000000000000000000000000
0007700000022fffff22200000022fffff222000000222fff2222000000222fff222200022222221000888380000000000000000000000000000000000000000
0070070000222f9ff9f2220000022f9ff9f2200000022fffff22200000222fffff2222002222222100088e880000000000000000000000000000000000000000
0000000000222f9ff9f2220000222f9ff9f2220000222f9ff9f2220000222f9ff9f222002222221100e888880000000000000000000000000000000000000000
0000000000022ffffff2200000222ffffff2220000222f9ff9f2220000022f9ff9f2200011111111008888e80000000000000000000000000000000000000000
5555444400fa22ffff22af00000a22ffff22a00000022ffffff2200000a222ffff222a00555544440088e8880000000000000000000000000000000000000000
555544440fffaaaaaaaafff000ffaaaaaaaaff0000aa22aaaa22aa000fffaaaaaaaafff055554444008888880000000000000000000000000000000000000000
444555540fffaaaaaaaafff00fffaaaaaaaafff00fffaaaaaaaafff00fffaaaaaaaafff04445555400088e880000000000000000000000000000000000000000
4445555400ff2aaaaaa2ff000fffaaaaaaaafff00fffaaaaaaaafff000ffaaaaaaaaff0044455554000888880000000000000000000000000000000000000000
55444455000222222222200000ff2aaaaaa2ff0000ff2aaaaaa2ff0000022aaaaaa2200055444455000088880000000000000000000000000000000000000000
554444550002222002222000000222222222200000022222222220000002222222222000554444550000088e0000000000000000000000000000000000000000
44555544000099900999000000009990099900000000999009990000000099900999000044555544000000880000000000000000000000000000000000000000
44555544000000000000000000000000000000000000000000000000000000000000000044555544000000000000000000000000000000000000000000000000
11111111000002222220000000000000000000000000022222200000000000000000000000000000000000000000000000000000000000000000000000000000
11222211000022222222000000000222222000000000222222220000000002222220000000000000000000000000000000000000000000000000000000000000
12222221000022222222000000002222222200000002222222220000000022222222000000000000000000000000000000000000000000000000000000000000
1222222100022222222f0000000022222222000000022222222f0000000022222222000000000000000000000000000000000000000000000000000000000000
1222222100022222f229000000022222222f000000022222f229000000022222222f000000000000000000000000000000000000000000000000000000000000
1222222100022222f2f9000000022222f229000000022222f2f9000000022222f229000000000000000000000000000000000000000000000000000000000000
11222211000222222fff000000022222f2f90000000222222fff000000022222f2f9000000000000000000000000000000000000000000000000000000000000
1111111100002aa222ff0000000222222fff000000002aa222ff0000000222222fff000000000000000000000000000000000000000000000000000000000000
111111110000aaaa22f000000000222222ff00000000aaaa222000000000222222ff000000000000000000000000000000000000000000000000000000000000
112222220000aaaaaa2a0000000022aaaa2000000000aaaaaaaa0000000022aaaa20000000000000000000000000000000000000000000000000000000000000
12222222000faaaaaaff00000000aaafffa00000000fffaaaaaff0000000aaafffa0000000000000000000000000000000000000000000000000000000000000
12222222000f2aaaaafff0000000aaafffa00000000fffaaaa2ff0000000aaafffa0000000000000000000000000000000000000000000000000000000000000
12222222000992222afff00000000a2ff22000000009f2222220000000000a2ff220000000000000000000000000000000000000000000000000000000000000
12222222000999220299900000000022990000000009992222999000000000229900000000000000000000000000000000000000000000000000000000000000
11222222000099200999000000000099990000000000992009990000000000999900000000000000000000000000000000000000000000000000000000000000
11111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000002222220000000000000000000000000022222200000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000022222222000000000222222000000000222222220000000002222220000000000000000000000000000000000000000000000000000000000000
000000000002222f2222200000002222222200000002222f22222000000022222222000000000000000000000000000000000000000000000000000000000000
00000000000222fff22220000002222f22222000000222fff22220000002222f2222200000000000000000000000000000000000000000000000000000000000
0000000000022fffff222000000222fff222200000022fffff222000000222fff222200000000000000000000000000000000000000000000000000000000000
0000000000222f9ff9f2220000222fffff22220000222f9ff9f2220000222fffff22220000000000000000000000000000000000000000000000000000000000
0000000000222f9ff9f2220000222f9ff9f2220000222f9ff9f2220000222f9ff9f2220000000000000000000000000000000000000000000000000000000000
0000000000022ffffff2200000022f9ff9f2200000022ffffff2200000022f9ff9f2200000000000000000000000000000000000000000000000000000000000
0000000000fa22ffff22aa0000a222ffff222a0000aa22ffff22af0000a222ffff222a0000000000000000000000000000000000000000000000000000000000
000000000fffaaaaaaaaaaa00fffaaaaaaaafff00aaaaaaaaaaafff00fffaaaaaaaafff000000000000000000000000000000000000000000000000000000000
000000000fffaaaaaaaaaff00fffaaaaaaaafff00fffaaaaaaaafff00fffaaaaaaaafff000000000000000000000000000000000000000000000000000000000
0000000000ff2aaaaaa2ff0000ffaaaaaaaaff0000ff2aaaaaa2ff0000ffaaaaaaaaff0000000000000000000000000000000000000000000000000000000000
00000000000222222299900000022aaaaaa22000000999222222200000022aaaaaa2200000000000000000000000000000000000000000000000000000000000
00000000000222200999900000022222222220000009999002222000000222222222200000000000000000000000000000000000000000000000000000000000
00000000000022000099000000009990099900000000990000220000000099900999000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000002222220000000000222222000000000022222200000000002222220000000000000000000000000000000000000000000000000000000000000
00000000000022222222000000002222222200000000222222220000000022222222000000000000000000000000000000000000000000000000000000000000
00000000000222222222200000002222222200000002222222222000000022222222000000000000000000000000000000000000000000000000000000000000
00000000000222222222200000022222222220000002222222222000000222222222200000000000000000000000000000000000000000000000000000000000
00000000000222222222200000022222222220000002222222222000000222222222200000000000000000000000000000000000000000000000000000000000
00000000002222222222220000022222222220000022222222222200000222222222200000000000000000000000000000000000000000000000000000000000
00000000002222222222220000222222222222000022222222222200002222222222220000000000000000000000000000000000000000000000000000000000
00000000000222222222200000222222222222000002222222222000002222222222220000000000000000000000000000000000000000000000000000000000
0000000000fa22222222aa00000a22222222a00000aa22222222af00000a22222222a00000000000000000000000000000000000000000000000000000000000
000000000fffaaaaaaaaaaa000ffa2aa22aaff000aaaaaaaaaaafff000ffa22a2aaaff0000000000000000000000000000000000000000000000000000000000
000000000fffaaaaaaaaaff00fffaaaaaaaafff00fffaaaaaaaafff00fffaaaaaaaafff000000000000000000000000000000000000000000000000000000000
0000000000ff2aaaaaa2ff000fffaaaaaaaafff000ff2aaaaaa2ff000fffaaaaaaaafff000000000000000000000000000000000000000000000000000000000
00000000000222222299900000ff2aaaaaa2ff00000999222222200000ff2aaaaaa2ff0000000000000000000000000000000000000000000000000000000000
00000000000222200999900000022222222220000009999002222000000222222222200000000000000000000000000000000000000000000000000000000000
00000000000022000099000000009990099900000000990000220000000099900999000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000101010000000000000000000000000001010100000000010000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
2020202020202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2020202020202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2010101010101010101010101010102000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0910101010101010101010101010103000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010100a0b101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101a1b101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0910101010101010101010101010103000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2010101010101010101010101010102000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0910101010101010101010101010103000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2010101010101010101010101010102000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3009203009203009203009203009203000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
